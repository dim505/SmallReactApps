{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\bob\\\\Documents\\\\Visual Studio 2015\\\\Projects\\\\my-app\\\\WeatherApp\\\\src\\\\App.js\";\n//imports all the CSS files, weather components, and 3rd party add ons\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.css';\nimport React from 'react';\nimport Titles from './components/title';\nimport Forms from './components/forms';\nimport Weather from './components/weather';\nimport MapContainer from './components/googlemap';\nimport ReactDOM from 'react-dom';\nimport { Circle } from 'react-preloaders';\nimport LoadingBar from 'react-top-loading-bar';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props); //binds getweather so it can modify state\n\n    this.add = value => {\n      this.setState({\n        loadingBarProgress: this.state.loadingBarProgress + value\n      });\n    };\n\n    this.complete = () => {\n      this.setState({\n        loadingBarProgress: 100\n      });\n    };\n\n    this.onLoaderFinished = () => {\n      this.setState({\n        loadingBarProgress: 0\n      });\n    };\n\n    this.getweather = async function fetchAsync(e) {\n      //prevent page refresh when page content is updated\n      e.preventDefault(); //gets city name from input box\n\n      const city = e.target.city.value; //gets iso code from input box\n\n      const country = e.target.country.value; //formualtes URL\n\n      this.add(33);\n      const URL = 'https://api.openweathermap.org/data/2.5/weather?q=' + city + ',' + country + '&APPID=14b174dcab9bf47b49468e07daa1ff87';\n      const fiveDayUrl = 'https://api.openweathermap.org/data/2.5/forecast?q=' + city + ',' + country + '&APPID=14b174dcab9bf47b49468e07daa1ff87'; // await response of fetch call\n\n      const response = await fetch(URL);\n      const FiveDayResponse = await fetch(fiveDayUrl);\n      this.add(33); //converts responds to json\n\n      const results = await response.json();\n      const FiveDayResults = await FiveDayResponse.json(); //checks if city and country are not blank and the returned response is not an error\n\n      if (city && country && response.status !== 404) {\n        //converts temp form K to F\n        const temp = Number(((results.main.temp - 273.15) * 9 / 5 + 32).toFixed(2)); //gets the appropriate icon for the weather\n\n        var IconUrl = \"https://openweathermap.org/img/wn/\" + results.weather[0].icon + \"@2x.png\"; //sets the state to be passed on to the compoents below\n\n        this.setState({\n          error: \"\",\n          temperature: temp,\n          city: results.name,\n          country: results.sys.country,\n          lat: results.coord.lat,\n          lon: results.coord.lon,\n          Desc: results.weather[0].description,\n          Icon: IconUrl,\n          FiveDayResultsList: FiveDayResults.list\n        });\n        this.complete();\n      } else {\n        //CLEARS OUT ALL THE STATE    \n        const ErrMsg = 'Opps!! Something went wrong. Please ensure both fields are filled out and are valid entities';\n        await this.setState({\n          error: ErrMsg,\n          temperature: \"\",\n          city: \"\",\n          country: \"\",\n          lat: \"\",\n          lon: \"\",\n          Desc: \"\",\n          Icon: \"\",\n          FiveDayResultsList: []\n        });\n      }\n    };\n\n    this.GetIntiWeath = async function GetIntiWeath() {\n      //gets if geolocation is supported\n      if (navigator.geolocation) {\n        //gets geolocation\n        navigator.geolocation.getCurrentPosition(async position => {\n          //gets latitube\n          const lat = position.coords.latitude; //gets longitube\n\n          const lon = position.coords.longitude; //defines current weather url\n\n          const URL = 'https://api.openweathermap.org/data/2.5/weather?lat=' + lat + '&lon=' + lon + '&APPID=14b174dcab9bf47b49468e07daa1ff87'; //defines 5 day hourly URL\n\n          const fiveDayUrl = 'https://api.openweathermap.org/data/2.5/forecast?lat=' + lat + '&lon=' + lon + '&APPID=14b174dcab9bf47b49468e07daa1ff87';\n          this.add(30); //Gets the results\n\n          const response = await fetch(URL);\n          const FiveDayResponse = await fetch(fiveDayUrl);\n          const results = await response.json();\n          const FiveDayResults = await FiveDayResponse.json();\n          this.add(30); //converts from K to F\n\n          const temp = Number(((results.main.temp - 273.15) * 9 / 5 + 32).toFixed(2));\n          var IconUrl = \"https://openweathermap.org/img/wn/\" + results.weather[0].icon + \"@2x.png\"; //sets state to be passed down to weather comp\n\n          this.setState({\n            error: \"\",\n            temperature: temp,\n            city: results.name,\n            country: results.sys.country,\n            lat: position.coords.latitude,\n            lon: position.coords.longitude,\n            Desc: results.weather[0].description,\n            Icon: IconUrl,\n            FiveDayResultsList: FiveDayResults.list\n          });\n          this.complete();\n        });\n      } else {\n        //serts\n        alert(\"Geolocation is not supported by this browser.\");\n      }\n    };\n\n    this.getweather = this.getweather.bind(this);\n    this.GetIntiWeath = this.GetIntiWeath.bind(this); //setting state of component\n\n    this.state = {\n      error: undefined,\n      temperature: undefined,\n      city: undefined,\n      country: undefined,\n      lat: undefined,\n      lon: undefined,\n      Desc: undefined,\n      Icon: undefined,\n      in: true,\n      FiveDayResultsList: [],\n      loadingBarProgress: 0\n    };\n  }\n\n  componentDidMount() {\n    // Get the components DOM node\n    const elem = ReactDOM.findDOMNode(this); // Set the opacity of the element to 0\n\n    elem.style.opacity = 0; //fades in after preloader loads\n\n    setTimeout(() => {\n      // Now set a transition on the opacity\n      elem.style.transition = \"opacity 2000ms\"; // and set the opacity to 1\n\n      elem.style.opacity = 1;\n    }, 3000); //calls function to load intial weather\n\n    this.GetIntiWeath(); //sets tab name\n\n    document.title = \"Weather App\";\n  }\n\n  render() {\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"background\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, React.createElement(LoadingBar, {\n      progress: this.state.loadingBarProgress,\n      height: 3,\n      color: \"red\",\n      onLoaderFinished: () => this.onLoaderFinished(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }), React.createElement(Titles, {\n      in: this.state.in,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }), React.createElement(Forms, {\n      loadWeather: this.getweather,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    })), React.createElement(Weather, {\n      WeatherCompError: this.state.error,\n      WeatherCompCity: this.state.city,\n      WeatherCompCountry: this.state.country,\n      WeatherCompTemp: this.state.temperature,\n      WeatherCompDesc: this.state.Desc,\n      WeatherCompIcon: this.state.Icon,\n      WeatherFiveDay: this.state.FiveDayResultsList,\n      in: this.state.in,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      id: \"map\",\n      className: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, React.createElement(MapContainer, {\n      Weatherlat: this.state.lat,\n      Weatherlon: this.state.lon,\n      zoom: 10,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    })), React.createElement(Circle, {\n      animation: \"slide-down\",\n      time: 1500,\n      color: \"#FFFAF0\",\n      background: \"radial-gradient(circle, rgba(63,94,251,1) 0%, rgba(252,70,107,1) 100%)\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:\\Users\\bob\\Documents\\Visual Studio 2015\\Projects\\my-app\\WeatherApp\\src\\App.js"],"names":["React","Titles","Forms","Weather","MapContainer","ReactDOM","Circle","LoadingBar","App","Component","constructor","props","add","value","setState","loadingBarProgress","state","complete","onLoaderFinished","getweather","fetchAsync","e","preventDefault","city","target","country","URL","fiveDayUrl","response","fetch","FiveDayResponse","results","json","FiveDayResults","status","temp","Number","main","toFixed","IconUrl","weather","icon","error","temperature","name","sys","lat","coord","lon","Desc","description","Icon","FiveDayResultsList","list","ErrMsg","GetIntiWeath","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","alert","bind","undefined","in","componentDidMount","elem","findDOMNode","style","opacity","setTimeout","transition","document","title","render"],"mappings":"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","sourcesContent":["//imports all the CSS files, weather components, and 3rd party add ons\r\nimport 'bootstrap/dist/css/bootstrap.min.css'\r\nimport './App.css'\r\nimport React from 'react';\r\nimport Titles from './components/title'\r\nimport Forms from './components/forms'\r\nimport Weather from './components/weather'\r\nimport MapContainer from './components/googlemap'\r\nimport ReactDOM from 'react-dom';\r\nimport {Circle} from 'react-preloaders';\r\nimport LoadingBar from 'react-top-loading-bar'\r\n\r\n\r\n\r\nclass App extends React.Component {\r\n\r\n    \r\n    constructor(props) {\r\n        super(props)\r\n        \r\n        //binds getweather so it can modify state\r\n        this.getweather = this.getweather.bind(this)\r\n        this.GetIntiWeath = this.GetIntiWeath.bind(this)\r\n        //setting state of component\r\n        this.state = {\r\n                 error: undefined,\r\n                 temperature: undefined,\r\n                 city: undefined,\r\n                 country: undefined,\r\n                 lat : undefined,\r\n                 lon: undefined,\r\n                 Desc : undefined,\r\n                 Icon : undefined,\r\n                 in: true,\r\n                 FiveDayResultsList : [],\r\n                 loadingBarProgress: 0\r\n        } \r\n\r\n\r\n\r\n\r\n    }\r\n\r\n    add = value => {\r\n        this.setState({  loadingBarProgress: this.state.loadingBarProgress + value })\r\n    }\r\n\r\n    complete = () => {this.setState ({loadingBarProgress: 100  }) }\r\n\r\n    onLoaderFinished = () => {this.setState({ loadingBarProgress: 0})}\r\n// async function\r\n    getweather = async function fetchAsync(e) {\r\n \r\n    //prevent page refresh when page content is updated\r\n    e.preventDefault();\r\n    //gets city name from input box\r\n    const city = e.target.city.value\r\n    //gets iso code from input box\r\n    const country = e.target.country.value\r\n    //formualtes URL\r\n    this.add(33)\r\n    const URL = 'https://api.openweathermap.org/data/2.5/weather?q=' + city + ',' + country + '&APPID=14b174dcab9bf47b49468e07daa1ff87'\r\n    const fiveDayUrl = 'https://api.openweathermap.org/data/2.5/forecast?q=' + city + ',' + country + '&APPID=14b174dcab9bf47b49468e07daa1ff87'\r\n    // await response of fetch call\r\n    const response = await fetch(URL);\r\n    const FiveDayResponse = await fetch(fiveDayUrl);\r\n    this.add(33)\r\n    \r\n    //converts responds to json\r\n    const results = await response.json(); \r\n    const FiveDayResults = await FiveDayResponse.json(); \r\n\r\n    \r\n    //checks if city and country are not blank and the returned response is not an error\r\n    if(city && country && response.status !== 404){\r\n    //converts temp form K to F\r\n    const temp = Number(( (((results.main.temp - 273.15) * 9)/5) + 32).toFixed(2))\r\n    \r\n    //gets the appropriate icon for the weather\r\n    var IconUrl = \"https://openweathermap.org/img/wn/\" + results.weather[0].icon + \"@2x.png\"    \r\n    \r\n    //sets the state to be passed on to the compoents below\r\n    this.setState ({\r\n    error: \"\",\r\n    temperature: temp,\r\n    city: results.name,\r\n    country: results.sys.country,\r\n    lat: results.coord.lat,\r\n    lon: results.coord.lon,\r\n    Desc : results.weather[0].description,\r\n    Icon : IconUrl,\r\n    FiveDayResultsList : FiveDayResults.list\r\n    })\r\n\r\n    this.complete()\r\n\r\n} else {     \r\n    \r\n    //CLEARS OUT ALL THE STATE    \r\n    const ErrMsg = 'Opps!! Something went wrong. Please ensure both fields are filled out and are valid entities'\r\n    await this.setState({\r\n    error: ErrMsg,\r\n    temperature: \"\",\r\n    city: \"\",\r\n    country: \"\",\r\n    lat: \"\",\r\n    lon: \"\",\r\n    Desc : \"\",\r\n    Icon : \"\",\r\n    FiveDayResultsList : []\r\n})} \r\n    \r\n   \r\n\r\n    \r\n \r\n}\r\n\r\n//gets the inital weather from geolocation\r\nGetIntiWeath = async function GetIntiWeath() {\r\n   //gets if geolocation is supported\r\n    if (navigator.geolocation) {\r\n        //gets geolocation\r\n        navigator.geolocation.getCurrentPosition(async (position) => {\r\n            //gets latitube\r\n            const lat = position.coords.latitude\r\n            //gets longitube\r\n            const lon =  position.coords.longitude\r\n            \r\n            //defines current weather url\r\n            const URL = 'https://api.openweathermap.org/data/2.5/weather?lat=' + lat + '&lon=' + lon + '&APPID=14b174dcab9bf47b49468e07daa1ff87'\r\n            //defines 5 day hourly URL\r\n            const fiveDayUrl  = 'https://api.openweathermap.org/data/2.5/forecast?lat=' + lat + '&lon=' + lon + '&APPID=14b174dcab9bf47b49468e07daa1ff87'\r\n            this.add(30)\r\n           //Gets the results\r\n            const response = await fetch(URL);\r\n            const FiveDayResponse = await fetch(fiveDayUrl);\r\n            const results = await response.json();\r\n            const FiveDayResults = await FiveDayResponse.json(); \r\n            this.add(30)\r\n            //converts from K to F\r\n            const temp = Number(( (((results.main.temp - 273.15) * 9)/5) + 32).toFixed(2))\r\n    \r\n\r\n            var IconUrl = \"https://openweathermap.org/img/wn/\" + results.weather[0].icon + \"@2x.png\" ;  \r\n            \r\n            //sets state to be passed down to weather comp\r\n            this.setState ({\r\n                    error: \"\",\r\n                    temperature: temp,\r\n                    city: results.name,\r\n                    country: results.sys.country,\r\n                    lat: position.coords.latitude,\r\n                    lon: position.coords.longitude,\r\n                    Desc : results.weather[0].description,\r\n                    Icon : IconUrl,\r\n                    FiveDayResultsList : FiveDayResults.list\r\n                    })\r\n\t\t\t      \r\n            this.complete()\r\n\r\n\r\n\r\n\r\n        });\r\n      } else {\r\n        //serts\r\n        alert(\"Geolocation is not supported by this browser.\")  }\r\n    \r\n  \r\n}\r\n\r\ncomponentDidMount () {\r\n   \r\n    // Get the components DOM node\r\n     const elem = ReactDOM.findDOMNode(this);\r\n    // Set the opacity of the element to 0\r\n    elem.style.opacity = 0;\r\n    //fades in after preloader loads\r\n    setTimeout(() => {\r\n        // Now set a transition on the opacity\r\n        elem.style.transition = \"opacity 2000ms\";\r\n        // and set the opacity to 1\r\n    elem.style.opacity = 1;\r\n    }, 3000);\r\n    //calls function to load intial weather\r\n    this.GetIntiWeath()\r\n    //sets tab name\r\n    document.title = \"Weather App\"\r\n\r\n\r\n}\r\n\r\n\r\n    render() {\r\n        return (<React.Fragment>\r\n            \r\n            <div className=\"background\">\r\n                    \r\n      \r\n      \r\n    \r\n            \r\n                <div className=\"center\">\r\n                    <LoadingBar\r\n                    progress={this.state.loadingBarProgress}\r\n                    height={3}\r\n                     color='red'\r\n                     onLoaderFinished={() => this.onLoaderFinished()}\r\n                         />\r\n                    <Titles in = {this.state.in}/>\r\n                    <Forms loadWeather={this.getweather} />\r\n                    \r\n                </div>    \r\n                    <Weather WeatherCompError = {this.state.error}\r\n                            WeatherCompCity = {this.state.city} \r\n                            WeatherCompCountry = {this.state.country}\r\n                            WeatherCompTemp = {this.state.temperature}\r\n                            WeatherCompDesc = {this.state.Desc}\r\n                            WeatherCompIcon = {this.state.Icon}\r\n                            WeatherFiveDay = {this.state.FiveDayResultsList}\r\n                            in = {this.state.in}\r\n                        />\r\n                </div>\r\n                <div id=\"map\" className=\"center\">\r\n                    <MapContainer \r\n\r\n                            Weatherlat = {this.state.lat}\r\n                            Weatherlon = {this.state.lon}\r\n                            zoom = {10}\r\n                    />\r\n                \r\n                </div>\r\n                \r\n                <Circle \r\n                       animation=\"slide-down\"\r\n                       time={1500}\r\n                       color=\"#FFFAF0\"\r\n                       background= \"radial-gradient(circle, rgba(63,94,251,1) 0%, rgba(252,70,107,1) 100%)\"\r\n                />\r\n            </React.Fragment>\r\n\r\n        )\r\n    }\r\n}\r\nexport default App;"]},"metadata":{},"sourceType":"module"}